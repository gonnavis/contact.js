<!DOCTYPE html>
<html>
<head>
	<title>Screensharing</title>
	<style type="text/css">
		html, body {
			background-color: #111;
			text-align: center;
		}
	</style>

</head>
<body>
	<canvas id="video-canvas"></canvas>
	<script type="text/javascript" src="vendor/jsmpeg/jsmpeg.min.js"></script>
	<script type="text/javascript">
		var canvas = document.getElementById('video-canvas');
		var url = 'ws://'+document.location.hostname+':8082/';
		var player = new JSMpeg.Player(url, {canvas: canvas});
	</script>

    <script src="src/wire.js"></script>
	<script src="src/connection.js"></script>
	<script src="src/transmitter.js"></script>
	<script src="src/transmitter_example.js"></script>
	<script type="text/javascript">
		var target = 'ws://' + location.hostname + ':8081/touchpad';
		var connection = new Connection(target, handler);
		connection.open();

        function screenshare() {
            connection.sendPack('sr');
            // TODO server should broadcast request to resize
            setTimeout(() => {
                player.video.hasSequenceHeader = false
            }, 500);
        }

        function webcam() {
            connection.sendPack('wr');
            setTimeout(() => {
                player.video.hasSequenceHeader = false
            }, 500);
        }
	</script>


    <div style="position: fixed; bottom: 0; left: 0; z-index: 50; padding: 10px;">
        <button onclick="screenshare()">Request Screenshare</button>
        <button onclick="webcam()">Request Webcam</button>


        <!--TODOS
        <button>Zoom x2</button>
        <button>Zoom x0.5</button>

        <button>Left</button>
        <button>Right</button>
        <button>Up</button>
        <button>Down</button>

        <button>Type something</button>
        -->

    </div>
</body>
</html>